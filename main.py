import streamlit as st
from typing import Generator
from groq import Groq

reference_text = "DOCUMENTO - DIÃRIO OFICIAL DA UNIAO:COORDENAÃ‡ÃƒO DE APERFEIÃ‡OAMENTODE PESSOAL DE NÃVEL SUPERIORPORTARIA NÂº 156, DE 28 DE NOVEMBRO DE 2014Aprova o regulamento do Programa deApoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP, que sedestina a proporcionar melhores condiÃ§Ãµespara a formaÃ§Ã£o de recursos humanos e para a produÃ§Ã£o e o aprofundamento do conhecimento nos cursos de pÃ³s-graduaÃ§Ã£ostricto sensu, mantidos por instituiÃ§Ãµes pÃº-blicas brasileiras.O PRESIDENTE DA COORDENAÃ‡ÃƒO DE APERFEI-Ã‡OAMENTO DE PESSOAL DE NÃVEL SUPERIOR - CAPES, nouso das atribuiÃ§Ãµes que lhe confere o art. 26, Inciso III do Anexo I doDecreto nÂº 7.692, de 02 de marÃ§o de 2012, e considerando a necessidade de reformular a regulamentaÃ§Ã£o do Programa de Apoio Ã PÃ³s-graduaÃ§Ã£o - PROAP, resolve:Art. 1Âº Fica aprovado, na forma do anexo, o novo regulamento do Programa de Apoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP.Art. 2Âº Esta Portaria entra em vigor na data de sua publicaÃ§Ã£o no DOU.Art. 3Âº Fica revogada a Portaria nÂº 64, de 24 de marÃ§o de 2010.JORGE ALMEIDA GUIMARÃƒESANEXOREGULAMENTO DOPROGRAMA DE APOIO Ã€ PÃ“S-GRADUAÃ‡ÃƒO - PROAPCapÃ­tulo IOBJETIVO DO PROGRAMA E CRITÃ‰RIOS PARA A APLICA-Ã‡ÃƒO DOS RECURSOSArt. 1Âº O Programa de Apoio Ã  PÃ³s-GraduaÃ§Ã£o - PROAP destina-se aproporcionar melhores condiÃ§Ãµes para a formaÃ§Ã£o de recursos humanos e para a produÃ§Ã£o e o aprofundamento do conhecimento noscursos de pÃ³s-graduaÃ§Ã£o stricto sensu mantidos por instituiÃ§Ãµes pÃº-blicas, envolvendo:I - apoio Ã s atividades inovadoras dos programas de pÃ³s-graduaÃ§Ã£o(PPGs), voltadas para o seu desenvolvimento acadÃªmico, visandooferecer formaÃ§Ã£o cada vez mais qualificada e diversificada aos estudantes de pÃ³s-graduaÃ§Ã£o e pesquisadores em estÃ¡gio pÃ³s-doutoral;II - utilizaÃ§Ã£o dos recursos disponÃ­veis no custeio das atividadescientÃ­fico- acadÃªmicas relacionadas Ã  titulaÃ§Ã£o de mestres e doutorese ao estÃ¡gio pÃ³s-doutoral;III - o apoio ao desenvolvimento dos trabalhos de planejamento e deexecuÃ§Ã£o da polÃ­tica institucional de pÃ³s-graduaÃ§Ã£o.CapÃ­tulo IIREQUISITOS E ATRIBUIÃ‡Ã•ES DAS INSTITUIÃ‡Ã•ESArt. 2Âº A instituiÃ§Ã£o participante do PROAP deverÃ¡:I - possuir personalidade jurÃ­dica de direito pÃºblico;II - manter programa de pÃ³s-graduaÃ§Ã£o (PPG) stricto sensu recomendado pela CAPES, em funcionamento e que possua cota de bolsado Programa de Demanda Social- DS;III - manter estrutura administrativa para gerÃªncia do PROAP nainstituiÃ§Ã£o;IV - garantir infra-estrutura de ensino e pesquisa para o funcionamento dos PPGs apoiados pelo PROAP;V - responsabilizar-se pelo cumprimento das obrigaÃ§Ãµes estipuladasnos convÃªnios, termos de execuÃ§Ã£o descentralizada e instrumentoscorrelatos firmados com a CAPES;VI - coordenar a execuÃ§Ã£o, o acompanhamento orÃ§amentÃ¡rio e financeiro e a fiscalizaÃ§Ã£o do PROAP, por meio da PrÃ³-Reitoria dePesquisa e PÃ³s-GraduaÃ§Ã£o (PRPPG), ou Ã³rgÃ£o equivalente de gestÃ£oda pÃ³s-graduaÃ§Ã£o stricto sensu, que se responsabilizarÃ¡ pela interlocuÃ§Ã£o com a CAPES;VII - encaminhar Ã  CAPES os documentos necessÃ¡rios Ã  adesÃ£o eimplementaÃ§Ã£o do PROAP, conforme modelos disponibilizados napÃ¡gina eletrÃ´nica da CAPES e legislaÃ§Ã£o vigente;VIII - divulgar internamente todos os comunicados enviados pelaCAPES;IX - solicitar Ã  CAPES, caso necessÃ¡rio, remanejamento de recursosentre os PPGs, de forma a otimizar sua execuÃ§Ã£o plena;X - efetuar, de acordo com a legislaÃ§Ã£o vigente e quando couber, aprestaÃ§Ã£o de contas e apresentar os relatÃ³rios de cumprimento deobjeto, conforme modelos disponibilizados na pÃ¡gina eletrÃ´nica daCAPES.CapÃ­tulo IIIATRIBUIÃ‡Ã•ES DA CAPESArt. 3 Âº SÃ£o atribuiÃ§Ãµes da CAPES:I - estabelecer as normas e diretrizes do PROAP;II - definir, divulgar e transferir os recursos orÃ§amentÃ¡rios e financeiros destinados Ã s instituiÃ§Ãµes, com base nos valores de referÃªnciacorrespondentes Ã  cada PPG e Ã  PRPPG ou Ã³rgÃ£o equivalente;III - acompanhar o desempenho dos PPGs nas instituiÃ§Ãµes apoiadaspelo PROAP, por intermÃ©dio das AvaliaÃ§Ãµes Trienais conduzidas pelaCAPES.CapÃ­tulo IVNORMAS OPERACIONAISArt. 4Âº O valor de referÃªncia para o repasse de recursos financeirosrelativos aos PPGs serÃ¡ fixado anualmente em funÃ§Ã£o da disponibilidade orÃ§amentÃ¡ria da CAPES e dos critÃ©rios abaixo:I - critÃ©rios principais:a) Ã¡rea do conhecimento;b) nÃ­vel de formaÃ§Ã£o (mestrado ou doutorado); ec) nota dos cursos na avaliaÃ§Ã£o mais recente realizada pela CAPES.II - critÃ©rios subsidiÃ¡rios:a) grau de utilizaÃ§Ã£o das cotas de bolsas concedidas do Programa deDemanda Social (DS);b) grau de utilizaÃ§Ã£o das cotas de bolsas concedidas do ProgramaNacional de PÃ³s-Doutorado (PNPD/CAPES); ec) grau de utilizaÃ§Ã£o dos recursos do PROAP em exercÃ­cios anteriores.Â§ 1Âº SerÃ¡ concedido um adicional de recursos Ã  PRPPG ou Ã³rgÃ£oequivalente, proporcional ao montante de recursos correspondentesaos PPGs de cada instituiÃ§Ã£o, que integrarÃ¡ o Plano de Trabalho dorespectivo instrumento de repasse.Â§ 2Âº Os recursos financeiros do PROAP correspondentes aoPNPD/CAPES deverÃ£o ser utilizados exclusivamente para o desenvolvimento das atividades de pesquisa definidas pelos respectivosbolsistas em estÃ¡gio pÃ³s-doutoral, conforme previsto no Plano deTrabalho Institucional aprovado pela CAPES.Art. 5Âº No repasse de recursos serÃ£o utilizados um dos seguintesinstrumentos, de acordo com respectiva legislaÃ§Ã£o vigente:I - Termo de ConvÃªnio;II - Termo de ExecuÃ§Ã£o Descentralizada; ouIII - Termo de SolicitaÃ§Ã£o e ConcessÃ£o de Apoio Financeiro a ProjetoEducacional ou de Pesquisa - AUXPE, instrumento especÃ­fico regulamentado pela CAPESÂ§ 1Âº Quando utilizado o AUXPE, o mesmo serÃ¡ firmado entre aCAPES e o responsÃ¡vel legal pela PrÃ³-Reitoria de Pesquisa e PÃ³sGraduaÃ§Ã£o ou Ã³rgÃ£o equivalente, com anuÃªncia do dirigente mÃ¡ximoda InstituiÃ§Ã£o beneficiada.Â§ 2Âº No caso de utilizaÃ§Ã£o do AUXPE, o responsÃ¡vel pelo recebimento do recurso submeter-se-Ã¡ Ã s normas correlatas deste instrumento.Art. 6Âº DeverÃ¡ ser verificado junto Ã s unidades responsÃ¡veis pelaexecuÃ§Ã£o financeira e contÃ¡bil da instituiÃ§Ã£o o enquadramento doselementos de despesa nas atividades financiÃ¡veis descritas no art. 7Âº,bem como os procedimentos e a documentaÃ§Ã£o comprobatÃ³ria dasdespesas pagas na forma deste regulamento, observadas as disposiÃ§Ãµes da Lei de Diretrizes OrÃ§amentÃ¡rias (LDO), do Manual deContabilidade Aplicada ao Setor PÃºblico (MCASP) e do ManualTÃ©cnico de OrÃ§amento (MTO) vigentes no respectivo exercÃ­cio, asnormas vinculantes e as alteraÃ§Ãµes posteriores emitidas pela Secretaria do Tesouro Nacional (STN) e pela Secretaria de OrÃ§amentoFederal (SOF).Art. 7Âº PoderÃ£o ser custeadas despesas correntes nos elementos eatividades abaixo, discriminados conforme objetivos dispostos no Artigo 1Âº:I - Elementos de despesa permitidos:a) material de consumo;b) serviÃ§os de terceiros (pessoa jurÃ­dica);c) serviÃ§os de terceiros (pessoa fÃ­sica);d) diÃ¡rias;e) passagens e despesas com locomoÃ§Ã£o;f) auxÃ­lio financeiro a estudante; eg) auxÃ­lio financeiro a pesquisador.II - Atividades a serem custeadas:a) manutenÃ§Ã£o de equipamentos;b) manutenÃ§Ã£o e funcionamento de laboratÃ³rio de ensino e pesquisa;c) serviÃ§os e taxas relacionados Ã  importaÃ§Ã£o;d) participaÃ§Ã£o em cursos e treinamentos em tÃ©cnicas de laboratÃ³rio eutilizaÃ§Ã£o de equipamentos;e) produÃ§Ã£o, revisÃ£o, traduÃ§Ã£o, editoraÃ§Ã£o, confecÃ§Ã£o e publicaÃ§Ã£o deconteÃºdos cientÃ­fico-acadÃªmicos e de divulgaÃ§Ã£o das atividades desenvolvidas no Ã¢mbito dos PPGs;f) manutenÃ§Ã£o do acervo de periÃ³dicos, desde que nÃ£o contempladosno Portal de PeriÃ³dicos da CAPES;g) apoio Ã  realizaÃ§Ã£o de eventos cientÃ­fico-acadÃªmicos no paÃ­s;h) participaÃ§Ã£o de professores, pesquisadores e alunos em atividadese cientÃ­fico-acadÃªmicos no paÃ­s e no exterior;i) participaÃ§Ã£o de convidados externos em atividades cientÃ­fico-acadÃªmicas no paÃ­s;j) participaÃ§Ã£o de professores, pesquisadores e alunos em atividadesde intercambio e parcerias entre PPGs e instituiÃ§Ãµes formalmenteassociados;k) participaÃ§Ã£o de alunos em cursos ou disciplinas em outro PPG,desde que estejam relacionados Ã s suas dissertaÃ§Ãµes e teses; el) aquisiÃ§Ã£o e manutenÃ§Ã£o de tecnologias em informÃ¡tica e da informaÃ§Ã£o caracterizadas como custeio, conforme disposto no artigo6Âº.Â§ 1Âº As atividades descritas nas alÃ­neas 'h', 'j' e 'k' do inciso II deste artigo referem-se exclusivamente aos professores vinculados aosPPGs, alunos matriculados nos PPGs e pesquisadores em estÃ¡gio pÃ³sdoutoral.Â§ 2Âº A anÃ¡lise de mÃ©rito e de priorizaÃ§Ã£o das despesas caberÃ¡ aosPPGs e respeitarÃ¡ os procedimentos administrativos de cada instituiÃ§Ã£o, conforme Plano de Trabalho Institucional aprovado pela CAPES, bem como as atribuiÃ§Ãµes fixadas no inciso VI do art. 2Âº. Nocaso das despesas relativas aos bolsistas PNPD, a anÃ¡lise de mÃ©rito ede priorizaÃ§Ã£o caberÃ¡ aos bolsistas, conforme disposto no art. 4Âº, Â§2Âº.Â§ 3Âº PoderÃ£o ser utilizados outros elementos de despesa alÃ©m dosprevistos no inciso I deste artigo, desde que guardem consonÃ¢nciacom os objetivos dispostos no artigo 1Âº, sejam vinculados Ã s atividades-fim da pÃ³s-graduaÃ§Ã£o e estejam detalhados no plano de trabalho ou na previsÃ£o orÃ§amentÃ¡ria com a devida aprovaÃ§Ã£o da CAPES.Art. 8Âº SerÃ¡ vedado pagamento de prÃ³-labore, consultoria, gratificaÃ§Ã£o e remuneraÃ§Ã£o para ministrar cursos, seminÃ¡rios, aulas, apresentar trabalhos e participar de bancas examinadoras;Art. 9Âº NÃ£o serÃ¡ permitida a contrataÃ§Ã£o de serviÃ§os de terceiros paracobrir despesas que caracterizem contratos de longa duraÃ§Ã£o, vÃ­nculoempregatÃ­cio, contrataÃ§Ãµes que nÃ£o sejam utilizadas nas atividadesfim da pÃ³s-graduaÃ§Ã£o ou contrataÃ§Ãµes em desacordo com a legislaÃ§Ã£ovigente;Art. 10 SerÃ¡ vedado o recebimento concomitante de diÃ¡rias e auxÃ­liofinanceiro para o custeio de despesas com hospedagem, alimentaÃ§Ã£o elocomoÃ§Ã£o urbana.Art. 11 O valor do auxÃ­lio financeiro para o custeio de despesas comhospedagem, alimentaÃ§Ã£o e locomoÃ§Ã£o urbana nÃ£o poderÃ¡ ser superior Ã  quantia equivalente em diÃ¡rias estabelecido para cargo denÃ­vel superior, conforme parÃ¢metros fixados em legislaÃ§Ã£o federalvigente.Art. 12 SerÃ¡ vedado o custeio de despesas de capital.CapÃ­tulo VIDISPOSIÃ‡Ã•ES FINAISArt. 13 Os casos omissos serÃ£o analisados pela CAPESDOCUMENTO - Portaria nÂº 156, de 28 de Novembro de 2014OrigemGAB/CAPESFinalidade do atoAto normativoEmentaAprova o novo regulamento do Programa de Apoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP.SituaÃ§Ã£oVigenteFonteDOU - SeÃ§Ã£o 1 - 03/12/2014, pÃ¡g. 11Revoga a(s) norma(s)/ato(s)Portaria nÂº 64, de 25 de Janeiro de 2010Aprova o regulamento do Programa deApoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP, que sedestina a proporcionar melhorescondiÃ§Ãµes para a formaÃ§Ã£o de recursoshumanos e para a produÃ§Ã£o e oaprofundamento do conhecimento noscursos de pÃ³s-graduaÃ§Ã£o stricto sensu,mantidos por instituiÃ§Ãµes pÃºblicasbrasileiras.O PRESIDENTE DA COORDENAÃ‡ÃƒO DE APERFEIÃ‡OAMENTO DE PESSOAL DE NÃVEL SUPERIOR - CAPES, no usodas atribuiÃ§Ãµes que lhe confere o art. 26, Inciso III do Anexo I do Decreto nÂº 7.692, de 02 de marÃ§o de 2012, e considerando anecessidade de reformular a regulamentaÃ§Ã£o do Programa de Apoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP, resolve:Art. 1Âº Fica aprovado, na forma do anexo, o novo regulamento do Programa de Apoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP.Art. 2Âº Esta Portaria entra em vigor na data de sua publicaÃ§Ã£o no DOU.Art. 3Âº Fica revogada a Portaria nÂº 64, de 24 de marÃ§o de 2010.JORGE ALMEIDA GUIMARÃƒESANEXOREGULAMENTO DO PROGRAMA DE APOIO Ã€ PÃ“S-GRADUAÃ‡ÃƒO - PROAPCapÃ­tulo IOBJETIVO DO PROGRAMA E CRITÃ‰RIOS PARA A APLICAÃ‡ÃƒO DOS RECURSOSArt. 1Âº O Programa de Apoio Ã  PÃ³s-GraduaÃ§Ã£o - PROAP destina-se a proporcionar melhores condiÃ§Ãµes para a formaÃ§Ã£o derecursos humanos e para a produÃ§Ã£o e o aprofundamento do conhecimento nos cursos de pÃ³s-graduaÃ§Ã£o stricto sensu mantidospor instituiÃ§Ãµes pÃºblicas, envolvendo:I - apoio Ã s atividades inovadoras dos programas de pÃ³s-graduaÃ§Ã£o (PPGs), voltadas para o seu desenvolvimentoacadÃªmico, visando oferecer formaÃ§Ã£o cada vez mais qualificada e diversificada aos estudantes de pÃ³s-graduaÃ§Ã£o epesquisadores em estÃ¡gio pÃ³s-doutoral;II - utilizaÃ§Ã£o dos recursos disponÃ­veis no custeio das atividades cientÃ­fico- acadÃªmicas relacionadas Ã  titulaÃ§Ã£o de mestres edoutores e ao estÃ¡gio pÃ³s-doutoral;III - o apoio ao desenvolvimento dos trabalhos de planejamento e de execuÃ§Ã£o da polÃ­tica institucional de pÃ³s-graduaÃ§Ã£o.CapÃ­tulo IIREQUISITOS E ATRIBUIÃ‡Ã•ES DAS INSTITUIÃ‡Ã•ESArt. 2Âº A instituiÃ§Ã£o participante do PROAP deverÃ¡:I - possuir personalidade jurÃ­dica de direito pÃºblico;II - manter programa de pÃ³s-graduaÃ§Ã£o (PPG) stricto sensu recomendado pela CAPES, em funcionamento e que possuacota de bolsa do Programa de Demanda Social- DS;III - manter estrutura administrativa para gerÃªncia do PROAP na instituiÃ§Ã£o:IV - garantir infra-estrutura de ensino e pesquisa para o funcionamento dos PPGs apoiados pelo PROAP;V - responsabilizar-se pelo cumprimento das obrigaÃ§Ãµes estipuladas nos convÃªnios, termos de execuÃ§Ã£o descentralizada einstrumentos correlatos firmados com a CAPES;VI - coordenar a execuÃ§Ã£o, o acompanhamento orÃ§amentÃ¡rio e financeiro e a fiscalizaÃ§Ã£o do PROAP, por meio da PrÃ³-Reitoria de Pesquisa e PÃ³s-GraduaÃ§Ã£o (PRPPG), ou Ã³rgÃ£o equivalente de gestÃ£o da pÃ³s-graduaÃ§Ã£o stricto sensu, que seresponsabilizarÃ¡ pela interlocuÃ§Ã£o com a CAPES;VII - encaminhar Ã  CAPES os documentos necessÃ¡rios Ã  adesÃ£o e implementaÃ§Ã£o do PROAP, conforme modelosdisponibilizados na pÃ¡gina eletrÃ´nica da CAPES e legislaÃ§Ã£o vigente;VIII - divulgar internamente todos os comunicados enviados pela CAPES;IX - solicitar Ã  CAPES, caso necessÃ¡rio, remanejamento de recursos entre os PPGs, de forma a otimizar sua execuÃ§Ã£oplena;X - efetuar, de acordo com a legislaÃ§Ã£o vigente e quando couber, a prestaÃ§Ã£o de contas e apresentar os relatÃ³rios decumprimento de objeto, conforme modelos disponibilizados na pÃ¡gina eletrÃ´nica da CAPES.CapÃ­tulo IIIATRIBUIÃ‡Ã•ES DA CAPESArt. 3 Âº SÃ£o atribuiÃ§Ãµes da CAPES:I - estabelecer as normas e diretrizes do PROAP;II - definir, divulgar e transferir os recursos orÃ§amentÃ¡rios e financeiros destinados Ã s instituiÃ§Ãµes, com base nos valores dereferÃªncia correspondentes Ã  cada PPG e Ã  PRPPG ou Ã³rgÃ£o equivalente;III - acompanhar o desempenho dos PPGs nas instituiÃ§Ãµes apoiadas pelo PROAP, por intermÃ©dio das AvaliaÃ§Ãµes Trienaisconduzidas pela CAPES.CapÃ­tulo IVNORMAS OPERACIONAISArt. 4Âº O valor de referÃªncia para o repasse de recursos financeiros relativos aos PPGs serÃ¡ fixado anualmente em funÃ§Ã£oda disponibilidade orÃ§amentÃ¡ria da CAPES e dos critÃ©rios abaixo:I - critÃ©rios principais:a) Ã¡rea do conhecimento;b) nÃ­vel de formaÃ§Ã£o (mestrado ou doutorado); ec) nota dos cursos na avaliaÃ§Ã£o mais recente realizada pela CAPES.II - critÃ©rios subsidiÃ¡rios:a) grau de utilizaÃ§Ã£o das cotas de bolsas concedidas do Programa de Demanda Social (DS);b) grau de utilizaÃ§Ã£o das cotas de bolsas concedidas do Programa Nacional de PÃ³s-Doutorado (PNPD/CAPES); ec) grau de utilizaÃ§Ã£o dos recursos do PROAP em exercÃ­cios anteriores.Â§ 1Âº SerÃ¡ concedido um adicional de recursos Ã  PRPPG ou Ã³rgÃ£o equivalente, proporcional ao montante de recursoscorrespondentes aos PPGs de cada instituiÃ§Ã£o, que integrarÃ¡ o Plano de Trabalho do respectivo instrumento de repasse.Â§ 2Âº Os recursos financeiros do PROAP correspondentes ao PNPD/CAPES deverÃ£o ser utilizados exclusivamente para odesenvolvimento das atividades de pesquisa definidas pelos respectivos bolsistas em estÃ¡gio pÃ³s-doutoral, conforme previsto noPlano de Trabalho Institucional aprovado pela CAPES.Art. 5Âº No repasse de recursos serÃ£o utilizados um dos seguintes instrumentos, de acordo com respectiva legislaÃ§Ã£ovigente:I - Termo de ConvÃªnio;II - Termo de ExecuÃ§Ã£o Descentralizada; ouIII - Termo de SolicitaÃ§Ã£o e ConcessÃ£o de Apoio Financeiro a Projeto Educacional ou de Pesquisa - AUXPE, instrumentoespecÃ­fico regulamentado pela CAPES.Â§ 1Âº Quando utilizado o AUXPE, o mesmo serÃ¡ firmado entre a CAPES e o responsÃ¡vel legal pela PrÃ³-Reitoria de Pesquisae PÃ³sGraduaÃ§Ã£o ou Ã³rgÃ£o equivalente, com anuÃªncia do dirigente mÃ¡ximo da InstituiÃ§Ã£o beneficiada.Â§ 2Âº No caso de utilizaÃ§Ã£o do AUXPE, o responsÃ¡vel pelo recebimento do recurso submeter-se-Ã¡ Ã s normas correlatas desteinstrumento.Art. 6Âº DeverÃ¡ ser verificado junto Ã s unidades responsÃ¡veis pela execuÃ§Ã£o financeira e contÃ¡bil da instituiÃ§Ã£o oenquadramento dos elementos de despesa nas atividades financiÃ¡veis descritas no art. 7Âº, bem como os procedimentos e adocumentaÃ§Ã£o comprobatÃ³ria das despesas pagas na forma deste regulamento, observadas as disposiÃ§Ãµes da Lei de DiretrizesOrÃ§amentÃ¡rias (LDO), do Manual de Contabilidade Aplicada ao Setor PÃºblico (MCASP) e do Manual TÃ©cnico de OrÃ§amento (MTO)vigentes no respectivo exercÃ­cio, as normas vinculantes e as alteraÃ§Ãµes posteriores emitidas pela Secretaria do Tesouro Nacional(STN) e pela Secretaria de OrÃ§amento Federal (SOF).Art. 7Âº PoderÃ£o ser custeadas despesas correntes nos elementos e atividades abaixo, discriminados conforme objetivosdispostos no Artigo 1Âº:I - Elementos de despesa permitidos:a) material de consumo;b) serviÃ§os de terceiros (pessoa jurÃ­dica);c) serviÃ§os de terceiros (pessoa fÃ­sica);d) diÃ¡rias;e) passagens e despesas com locomoÃ§Ã£o;f) auxÃ­lio financeiro a estudante; eg) auxÃ­lio financeiro a pesquisador.II - Atividades a serem custeadas:a) manutenÃ§Ã£o de equipamentos;b) manutenÃ§Ã£o e funcionamento de laboratÃ³rio de ensino e pesquisa;c) serviÃ§os e taxas relacionados Ã  importaÃ§Ã£o;d) participaÃ§Ã£o em cursos e treinamentos em tÃ©cnicas de laboratÃ³rio e utilizaÃ§Ã£o de equipamentos;e) produÃ§Ã£o, revisÃ£o, traduÃ§Ã£o, editoraÃ§Ã£o, confecÃ§Ã£o e publicaÃ§Ã£o de conteÃºdos cientÃ­fico-acadÃªmicos e de divulgaÃ§Ã£o dasatividades desenvolvidas no Ã¢mbito dos PPGs;f) manutenÃ§Ã£o do acervo de periÃ³dicos, desde que nÃ£o contemplados no Portal de PeriÃ³dicos da CAPES;g) apoio Ã  realizaÃ§Ã£o de eventos cientÃ­fico-acadÃªmicos no paÃ­s;h) participaÃ§Ã£o de professores, pesquisadores e alunos em atividades e cientÃ­fico-acadÃªmicos no paÃ­s e no exterior;i) participaÃ§Ã£o de convidados externos em atividades cientÃ­fico-acadÃªmicas no paÃ­s;j) participaÃ§Ã£o de professores, pesquisadores e alunos em atividades de intercambio e parcerias entre PPGs e instituiÃ§Ãµesformalmente associados;k) participaÃ§Ã£o de alunos em cursos ou disciplinas em outro PPG, desde que estejam relacionados Ã s suas dissertaÃ§Ãµes eteses; el) aquisiÃ§Ã£o e manutenÃ§Ã£o de tecnologias em informÃ¡tica e da informaÃ§Ã£o caracterizadas como custeio, conforme dispostono artigo 6Âº.Â§ 1Âº As atividades descritas nas alÃ­neas 'h', 'j' e 'k' do inciso II deste artigo referem-se exclusivamente aos professoresvinculados aos PPGs, alunos matriculados nos PPGs e pesquisadores em estÃ¡gio pÃ³sdoutoral.Â§ 2Âº A anÃ¡lise de mÃ©rito e de priorizaÃ§Ã£o das despesas caberÃ¡ aos PPGs e respeitarÃ¡ os procedimentos administrativos decada instituiÃ§Ã£o, conforme Plano de Trabalho Institucional aprovado pela CAPES, bem como as atribuiÃ§Ãµes fixadas no inciso VI doart. 2Âº. No caso das despesas relativas aos bolsistas PNPD, a anÃ¡lise de mÃ©rito e de priorizaÃ§Ã£o caberÃ¡ aos bolsistas, conformedisposto no art. 4Âº, Â§ 2Âº.Â§ 3Âº PoderÃ£o ser utilizados outros elementos de despesa alÃ©m dos previstos no inciso I deste artigo, desde que guardemconsonÃ¢ncia com os objetivos dispostos no artigo 1Âº, sejam vinculados Ã s atividades-fim da pÃ³s-graduaÃ§Ã£o e estejam detalhadosno plano de trabalho ou na previsÃ£o orÃ§amentÃ¡ria com a devida aprovaÃ§Ã£o da CAPES.Art. 8Âº SerÃ¡ vedado pagamento de prÃ³-labore, consultoria, gratificaÃ§Ã£o e remuneraÃ§Ã£o para ministrar cursos, seminÃ¡rios,aulas, apresentar trabalhos e participar de bancas examinadoras;Art. 9Âº NÃ£o serÃ¡ permitida a contrataÃ§Ã£o de serviÃ§os de terceiros para cobrir despesas que caracterizem contratos de longaduraÃ§Ã£o, vÃ­nculo empregatÃ­cio, contrataÃ§Ãµes que nÃ£o sejam utilizadas nas atividadesfim da pÃ³s-graduaÃ§Ã£o ou contrataÃ§Ãµes emdesacordo com a legislaÃ§Ã£o vigente;Art. 10 SerÃ¡ vedado o recebimento concomitante de diÃ¡rias e auxÃ­lio financeiro para o custeio de despesas comhospedagem, alimentaÃ§Ã£o e locomoÃ§Ã£o urbana.Art. 11 O valor do auxÃ­lio financeiro para o custeio de despesas com hospedagem, alimentaÃ§Ã£o e locomoÃ§Ã£o urbana nÃ£opoderÃ¡ ser superior Ã  quantia equivalente em diÃ¡rias estabelecido para cargo de nÃ­vel superior, conforme parÃ¢metros fixados em legislaÃ§Ã£o federal vigente. Art. 12 SerÃ¡ vedado o custeio de despesas de capital."
st.set_page_config(page_icon="ğŸ’¬", layout="wide",
                   page_title="Mestrado Frederico - PROAP DÃºvidas")


st.subheader("Tire suas DÃºvidas sobre Portaria PROAP \nAutor: Frederico Joaquim Gomes de Mello", divider="rainbow", anchor=False)

# Sidebar com botÃ£o para limpar a janela de chat.
with st.sidebar:
    if st.button("Limpar Chat", use_container_width=True, type="primary"):
        st.session_state.messages = []
        st.rerun()


client = Groq(
    api_key=st.secrets["GROQ_API_KEY"],
)

# Initialize chat history and selected model
if "messages" not in st.session_state:
    st.session_state.messages = []

if "selected_model" not in st.session_state:
    st.session_state.selected_model = None




model_option = "llama3-70b-8192"

# Detect model change and clear chat history if model has changed
if st.session_state.selected_model != model_option:
    st.session_state.messages = []
    st.session_state.selected_model = model_option


max_tokens = 8192

# Display chat messages from history on app rerun
for message in st.session_state.messages:
    avatar = 'ğŸ¤–' if message["role"] == "assistant" else 'ğŸ‘¨â€ğŸ’»'
    with st.chat_message(message["role"], avatar=avatar):
        st.markdown(message["content"])


def generate_chat_responses(chat_completion) -> Generator[str, None, None]:
    """Yield chat response content from the Groq API response."""
    for chunk in chat_completion:
        if chunk.choices[0].delta.content:
            yield chunk.choices[0].delta.content


if prompt := st.chat_input("Digite sua pergunta - Estamos aqui pra tirar suas dÃºvidas..."):
    st.session_state.messages.append({"role": "user", "content": prompt})    

    with st.chat_message("user", avatar='ğŸ‘¨â€ğŸ’»'):
        st.markdown(prompt)

    # Adicione o texto de referÃªncia como contexto no prompt
    messages = [
        {"role": "system", "content": f"VocÃª Ã© um especialista que responde apenas com base no seguinte texto: {reference_text}. Seu objetivo Ã© explicar o que vocÃª encontra no texto e citar em qual documento achou a informaÃ§Ã£o, parÃ¡grafo e etc. Seja claro nas respostas pois vocÃª deve tirar dÃºvidas"},
        *[
            {"role": m["role"], "content": m["content"]}
            for m in st.session_state.messages
        ]
    ]
    # Fetch response from Groq API
    try:
        chat_completion = client.chat.completions.create(
            model=model_option,
            messages=messages,
            max_tokens=max_tokens,
            stream=True
        )

        # Use the generator function with st.write_stream
        with st.chat_message("assistant", avatar="ğŸ¤–"):
            chat_responses_generator = generate_chat_responses(chat_completion)
            full_response = st.write_stream(chat_responses_generator)
    except Exception as e:
        st.error(e, icon="ğŸš¨")

    # Append the full response to session_state.messages
    if isinstance(full_response, str):
        st.session_state.messages.append(
            {"role": "assistant", "content": full_response})
    else:
        # Handle the case where full_response is not a string
        combined_response = "\n".join(str(item) for item in full_response)
        st.session_state.messages.append(
            {"role": "assistant", "content": combined_response})