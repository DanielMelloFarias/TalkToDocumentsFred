import streamlit as st
from typing import Generator
from groq import Groq

reference_text = "DOCUMENTO - DIÃRIO OFICIAL DA UNIAO:COORDENAÃ‡ÃƒO DE APERFEIÃ‡OAMENTODE PESSOAL DE NÃVEL SUPERIORPORTARIA NÂº 156, DE 28 DE NOVEMBRO DE 2014Aprova o regulamento do Programa deApoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP, que sedestina a proporcionar melhores condiÃ§Ãµespara a formaÃ§Ã£o de recursos humanos e para a produÃ§Ã£o e o aprofundamento do conhecimento nos cursos de pÃ³s-graduaÃ§Ã£ostricto sensu, mantidos por instituiÃ§Ãµes pÃº-blicas brasileiras.O PRESIDENTE DA COORDENAÃ‡ÃƒO DE APERFEI-Ã‡OAMENTO DE PESSOAL DE NÃVEL SUPERIOR - CAPES, nouso das atribuiÃ§Ãµes que lhe confere o art. 26, Inciso III do Anexo I doDecreto nÂº 7.692, de 02 de marÃ§o de 2012, e considerando a necessidade de reformular a regulamentaÃ§Ã£o do Programa de Apoio Ã PÃ³s-graduaÃ§Ã£o - PROAP, resolve:Art. 1Âº Fica aprovado, na forma do anexo, o novo regulamento do Programa de Apoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP.Art. 2Âº Esta Portaria entra em vigor na data de sua publicaÃ§Ã£o no DOU.Art. 3Âº Fica revogada a Portaria nÂº 64, de 24 de marÃ§o de 2010.JORGE ALMEIDA GUIMARÃƒESANEXOREGULAMENTO DOPROGRAMA DE APOIO Ã€ PÃ“S-GRADUAÃ‡ÃƒO - PROAPCapÃ­tulo IOBJETIVO DO PROGRAMA E CRITÃ‰RIOS PARA A APLICA-Ã‡ÃƒO DOS RECURSOSArt. 1Âº O Programa de Apoio Ã  PÃ³s-GraduaÃ§Ã£o - PROAP destina-se aproporcionar melhores condiÃ§Ãµes para a formaÃ§Ã£o de recursos humanos e para a produÃ§Ã£o e o aprofundamento do conhecimento noscursos de pÃ³s-graduaÃ§Ã£o stricto sensu mantidos por instituiÃ§Ãµes pÃº-blicas, envolvendo:I - apoio Ã s atividades inovadoras dos programas de pÃ³s-graduaÃ§Ã£o(PPGs), voltadas para o seu desenvolvimento acadÃªmico, visandooferecer formaÃ§Ã£o cada vez mais qualificada e diversificada aos estudantes de pÃ³s-graduaÃ§Ã£o e pesquisadores em estÃ¡gio pÃ³s-doutoral;II - utilizaÃ§Ã£o dos recursos disponÃ­veis no custeio das atividadescientÃ­fico- acadÃªmicas relacionadas Ã  titulaÃ§Ã£o de mestres e doutorese ao estÃ¡gio pÃ³s-doutoral;III - o apoio ao desenvolvimento dos trabalhos de planejamento e deexecuÃ§Ã£o da polÃ­tica institucional de pÃ³s-graduaÃ§Ã£o.CapÃ­tulo IIREQUISITOS E ATRIBUIÃ‡Ã•ES DAS INSTITUIÃ‡Ã•ESArt. 2Âº A instituiÃ§Ã£o participante do PROAP deverÃ¡:I - possuir personalidade jurÃ­dica de direito pÃºblico;II - manter programa de pÃ³s-graduaÃ§Ã£o (PPG) stricto sensu recomendado pela CAPES, em funcionamento e que possua cota de bolsado Programa de Demanda Social- DS;III - manter estrutura administrativa para gerÃªncia do PROAP nainstituiÃ§Ã£o;IV - garantir infra-estrutura de ensino e pesquisa para o funcionamento dos PPGs apoiados pelo PROAP;V - responsabilizar-se pelo cumprimento das obrigaÃ§Ãµes estipuladasnos convÃªnios, termos de execuÃ§Ã£o descentralizada e instrumentoscorrelatos firmados com a CAPES;VI - coordenar a execuÃ§Ã£o, o acompanhamento orÃ§amentÃ¡rio e financeiro e a fiscalizaÃ§Ã£o do PROAP, por meio da PrÃ³-Reitoria dePesquisa e PÃ³s-GraduaÃ§Ã£o (PRPPG), ou Ã³rgÃ£o equivalente de gestÃ£oda pÃ³s-graduaÃ§Ã£o stricto sensu, que se responsabilizarÃ¡ pela interlocuÃ§Ã£o com a CAPES;VII - encaminhar Ã  CAPES os documentos necessÃ¡rios Ã  adesÃ£o eimplementaÃ§Ã£o do PROAP, conforme modelos disponibilizados napÃ¡gina eletrÃ´nica da CAPES e legislaÃ§Ã£o vigente;VIII - divulgar internamente todos os comunicados enviados pelaCAPES;IX - solicitar Ã  CAPES, caso necessÃ¡rio, remanejamento de recursosentre os PPGs, de forma a otimizar sua execuÃ§Ã£o plena;X - efetuar, de acordo com a legislaÃ§Ã£o vigente e quando couber, aprestaÃ§Ã£o de contas e apresentar os relatÃ³rios de cumprimento deobjeto, conforme modelos disponibilizados na pÃ¡gina eletrÃ´nica daCAPES.CapÃ­tulo IIIATRIBUIÃ‡Ã•ES DA CAPESArt. 3 Âº SÃ£o atribuiÃ§Ãµes da CAPES:I - estabelecer as normas e diretrizes do PROAP;II - definir, divulgar e transferir os recursos orÃ§amentÃ¡rios e financeiros destinados Ã s instituiÃ§Ãµes, com base nos valores de referÃªnciacorrespondentes Ã  cada PPG e Ã  PRPPG ou Ã³rgÃ£o equivalente;III - acompanhar o desempenho dos PPGs nas instituiÃ§Ãµes apoiadaspelo PROAP, por intermÃ©dio das AvaliaÃ§Ãµes Trienais conduzidas pelaCAPES.CapÃ­tulo IVNORMAS OPERACIONAISArt. 4Âº O valor de referÃªncia para o repasse de recursos financeirosrelativos aos PPGs serÃ¡ fixado anualmente em funÃ§Ã£o da disponibilidade orÃ§amentÃ¡ria da CAPES e dos critÃ©rios abaixo:I - critÃ©rios principais:a) Ã¡rea do conhecimento;b) nÃ­vel de formaÃ§Ã£o (mestrado ou doutorado); ec) nota dos cursos na avaliaÃ§Ã£o mais recente realizada pela CAPES.II - critÃ©rios subsidiÃ¡rios:a) grau de utilizaÃ§Ã£o das cotas de bolsas concedidas do Programa deDemanda Social (DS);b) grau de utilizaÃ§Ã£o das cotas de bolsas concedidas do ProgramaNacional de PÃ³s-Doutorado (PNPD/CAPES); ec) grau de utilizaÃ§Ã£o dos recursos do PROAP em exercÃ­cios anteriores.Â§ 1Âº SerÃ¡ concedido um adicional de recursos Ã  PRPPG ou Ã³rgÃ£oequivalente, proporcional ao montante de recursos correspondentesaos PPGs de cada instituiÃ§Ã£o, que integrarÃ¡ o Plano de Trabalho dorespectivo instrumento de repasse.Â§ 2Âº Os recursos financeiros do PROAP correspondentes aoPNPD/CAPES deverÃ£o ser utilizados exclusivamente para o desenvolvimento das atividades de pesquisa definidas pelos respectivosbolsistas em estÃ¡gio pÃ³s-doutoral, conforme previsto no Plano deTrabalho Institucional aprovado pela CAPES.Art. 5Âº No repasse de recursos serÃ£o utilizados um dos seguintesinstrumentos, de acordo com respectiva legislaÃ§Ã£o vigente:I - Termo de ConvÃªnio;II - Termo de ExecuÃ§Ã£o Descentralizada; ouIII - Termo de SolicitaÃ§Ã£o e ConcessÃ£o de Apoio Financeiro a ProjetoEducacional ou de Pesquisa - AUXPE, instrumento especÃ­fico regulamentado pela CAPESÂ§ 1Âº Quando utilizado o AUXPE, o mesmo serÃ¡ firmado entre aCAPES e o responsÃ¡vel legal pela PrÃ³-Reitoria de Pesquisa e PÃ³sGraduaÃ§Ã£o ou Ã³rgÃ£o equivalente, com anuÃªncia do dirigente mÃ¡ximoda InstituiÃ§Ã£o beneficiada.Â§ 2Âº No caso de utilizaÃ§Ã£o do AUXPE, o responsÃ¡vel pelo recebimento do recurso submeter-se-Ã¡ Ã s normas correlatas deste instrumento.Art. 6Âº DeverÃ¡ ser verificado junto Ã s unidades responsÃ¡veis pelaexecuÃ§Ã£o financeira e contÃ¡bil da instituiÃ§Ã£o o enquadramento doselementos de despesa nas atividades financiÃ¡veis descritas no art. 7Âº,bem como os procedimentos e a documentaÃ§Ã£o comprobatÃ³ria dasdespesas pagas na forma deste regulamento, observadas as disposiÃ§Ãµes da Lei de Diretrizes OrÃ§amentÃ¡rias (LDO), do Manual deContabilidade Aplicada ao Setor PÃºblico (MCASP) e do ManualTÃ©cnico de OrÃ§amento (MTO) vigentes no respectivo exercÃ­cio, asnormas vinculantes e as alteraÃ§Ãµes posteriores emitidas pela Secretaria do Tesouro Nacional (STN) e pela Secretaria de OrÃ§amentoFederal (SOF).Art. 7Âº PoderÃ£o ser custeadas despesas correntes nos elementos eatividades abaixo, discriminados conforme objetivos dispostos no Artigo 1Âº:I - Elementos de despesa permitidos:a) material de consumo;b) serviÃ§os de terceiros (pessoa jurÃ­dica);c) serviÃ§os de terceiros (pessoa fÃ­sica);d) diÃ¡rias;e) passagens e despesas com locomoÃ§Ã£o;f) auxÃ­lio financeiro a estudante; eg) auxÃ­lio financeiro a pesquisador.II - Atividades a serem custeadas:a) manutenÃ§Ã£o de equipamentos;b) manutenÃ§Ã£o e funcionamento de laboratÃ³rio de ensino e pesquisa;c) serviÃ§os e taxas relacionados Ã  importaÃ§Ã£o;d) participaÃ§Ã£o em cursos e treinamentos em tÃ©cnicas de laboratÃ³rio eutilizaÃ§Ã£o de equipamentos;e) produÃ§Ã£o, revisÃ£o, traduÃ§Ã£o, editoraÃ§Ã£o, confecÃ§Ã£o e publicaÃ§Ã£o deconteÃºdos cientÃ­fico-acadÃªmicos e de divulgaÃ§Ã£o das atividades desenvolvidas no Ã¢mbito dos PPGs;f) manutenÃ§Ã£o do acervo de periÃ³dicos, desde que nÃ£o contempladosno Portal de PeriÃ³dicos da CAPES;g) apoio Ã  realizaÃ§Ã£o de eventos cientÃ­fico-acadÃªmicos no paÃ­s;h) participaÃ§Ã£o de professores, pesquisadores e alunos em atividadese cientÃ­fico-acadÃªmicos no paÃ­s e no exterior;i) participaÃ§Ã£o de convidados externos em atividades cientÃ­fico-acadÃªmicas no paÃ­s;j) participaÃ§Ã£o de professores, pesquisadores e alunos em atividadesde intercambio e parcerias entre PPGs e instituiÃ§Ãµes formalmenteassociados;k) participaÃ§Ã£o de alunos em cursos ou disciplinas em outro PPG,desde que estejam relacionados Ã s suas dissertaÃ§Ãµes e teses; el) aquisiÃ§Ã£o e manutenÃ§Ã£o de tecnologias em informÃ¡tica e da informaÃ§Ã£o caracterizadas como custeio, conforme disposto no artigo6Âº.Â§ 1Âº As atividades descritas nas alÃ­neas 'h', 'j' e 'k' do inciso II deste artigo referem-se exclusivamente aos professores vinculados aosPPGs, alunos matriculados nos PPGs e pesquisadores em estÃ¡gio pÃ³sdoutoral.Â§ 2Âº A anÃ¡lise de mÃ©rito e de priorizaÃ§Ã£o das despesas caberÃ¡ aosPPGs e respeitarÃ¡ os procedimentos administrativos de cada instituiÃ§Ã£o, conforme Plano de Trabalho Institucional aprovado pela CAPES, bem como as atribuiÃ§Ãµes fixadas no inciso VI do art. 2Âº. Nocaso das despesas relativas aos bolsistas PNPD, a anÃ¡lise de mÃ©rito ede priorizaÃ§Ã£o caberÃ¡ aos bolsistas, conforme disposto no art. 4Âº, Â§2Âº.Â§ 3Âº PoderÃ£o ser utilizados outros elementos de despesa alÃ©m dosprevistos no inciso I deste artigo, desde que guardem consonÃ¢nciacom os objetivos dispostos no artigo 1Âº, sejam vinculados Ã s atividades-fim da pÃ³s-graduaÃ§Ã£o e estejam detalhados no plano de trabalho ou na previsÃ£o orÃ§amentÃ¡ria com a devida aprovaÃ§Ã£o da CAPES.Art. 8Âº SerÃ¡ vedado pagamento de prÃ³-labore, consultoria, gratificaÃ§Ã£o e remuneraÃ§Ã£o para ministrar cursos, seminÃ¡rios, aulas, apresentar trabalhos e participar de bancas examinadoras;Art. 9Âº NÃ£o serÃ¡ permitida a contrataÃ§Ã£o de serviÃ§os de terceiros paracobrir despesas que caracterizem contratos de longa duraÃ§Ã£o, vÃ­nculoempregatÃ­cio, contrataÃ§Ãµes que nÃ£o sejam utilizadas nas atividadesfim da pÃ³s-graduaÃ§Ã£o ou contrataÃ§Ãµes em desacordo com a legislaÃ§Ã£ovigente;Art. 10 SerÃ¡ vedado o recebimento concomitante de diÃ¡rias e auxÃ­liofinanceiro para o custeio de despesas com hospedagem, alimentaÃ§Ã£o elocomoÃ§Ã£o urbana.Art. 11 O valor do auxÃ­lio financeiro para o custeio de despesas comhospedagem, alimentaÃ§Ã£o e locomoÃ§Ã£o urbana nÃ£o poderÃ¡ ser superior Ã  quantia equivalente em diÃ¡rias estabelecido para cargo denÃ­vel superior, conforme parÃ¢metros fixados em legislaÃ§Ã£o federalvigente.Art. 12 SerÃ¡ vedado o custeio de despesas de capital.CapÃ­tulo VIDISPOSIÃ‡Ã•ES FINAISArt. 13 Os casos omissos serÃ£o analisados pela CAPESDOCUMENTO - Portaria nÂº 156, de 28 de Novembro de 2014OrigemGAB/CAPESFinalidade do atoAto normativoEmentaAprova o novo regulamento do Programa de Apoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP.SituaÃ§Ã£oVigenteFonteDOU - SeÃ§Ã£o 1 - 03/12/2014, pÃ¡g. 11Revoga a(s) norma(s)/ato(s)Portaria nÂº 64, de 25 de Janeiro de 2010Aprova o regulamento do Programa deApoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP, que sedestina a proporcionar melhorescondiÃ§Ãµes para a formaÃ§Ã£o de recursoshumanos e para a produÃ§Ã£o e oaprofundamento do conhecimento noscursos de pÃ³s-graduaÃ§Ã£o stricto sensu,mantidos por instituiÃ§Ãµes pÃºblicasbrasileiras.O PRESIDENTE DA COORDENAÃ‡ÃƒO DE APERFEIÃ‡OAMENTO DE PESSOAL DE NÃVEL SUPERIOR - CAPES, no usodas atribuiÃ§Ãµes que lhe confere o art. 26, Inciso III do Anexo I do Decreto nÂº 7.692, de 02 de marÃ§o de 2012, e considerando anecessidade de reformular a regulamentaÃ§Ã£o do Programa de Apoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP, resolve:Art. 1Âº Fica aprovado, na forma do anexo, o novo regulamento do Programa de Apoio Ã  PÃ³s-graduaÃ§Ã£o - PROAP.Art. 2Âº Esta Portaria entra em vigor na data de sua publicaÃ§Ã£o no DOU.Art. 3Âº Fica revogada a Portaria nÂº 64, de 24 de marÃ§o de 2010.JORGE ALMEIDA GUIMARÃƒESANEXOREGULAMENTO DO PROGRAMA DE APOIO Ã€ PÃ“S-GRADUAÃ‡ÃƒO - PROAPCapÃ­tulo IOBJETIVO DO PROGRAMA E CRITÃ‰RIOS PARA A APLICAÃ‡ÃƒO DOS RECURSOSArt. 1Âº O Programa de Apoio Ã  PÃ³s-GraduaÃ§Ã£o - PROAP destina-se a proporcionar melhores condiÃ§Ãµes para a formaÃ§Ã£o derecursos humanos e para a produÃ§Ã£o e o aprofundamento do conhecimento nos cursos de pÃ³s-graduaÃ§Ã£o stricto sensu mantidospor instituiÃ§Ãµes pÃºblicas, envolvendo:I - apoio Ã s atividades inovadoras dos programas de pÃ³s-graduaÃ§Ã£o (PPGs), voltadas para o seu desenvolvimentoacadÃªmico, visando oferecer formaÃ§Ã£o cada vez mais qualificada e diversificada aos estudantes de pÃ³s-graduaÃ§Ã£o epesquisadores em estÃ¡gio pÃ³s-doutoral;II - utilizaÃ§Ã£o dos recursos disponÃ­veis no custeio das atividades cientÃ­fico- acadÃªmicas relacionadas Ã  titulaÃ§Ã£o de mestres edoutores e ao estÃ¡gio pÃ³s-doutoral;III - o apoio ao desenvolvimento dos trabalhos de planejamento e de execuÃ§Ã£o da polÃ­tica institucional de pÃ³s-graduaÃ§Ã£o.CapÃ­tulo IIREQUISITOS E ATRIBUIÃ‡Ã•ES DAS INSTITUIÃ‡Ã•ESArt. 2Âº A instituiÃ§Ã£o participante do PROAP deverÃ¡:I - possuir personalidade jurÃ­dica de direito pÃºblico;II - manter programa de pÃ³s-graduaÃ§Ã£o (PPG) stricto sensu recomendado pela CAPES, em funcionamento e que possuacota de bolsa do Programa de Demanda Social- DS;III - manter estrutura administrativa para gerÃªncia do PROAP na instituiÃ§Ã£o:IV - garantir infra-estrutura de ensino e pesquisa para o funcionamento dos PPGs apoiados pelo PROAP;V - responsabilizar-se pelo cumprimento das obrigaÃ§Ãµes estipuladas nos convÃªnios, termos de execuÃ§Ã£o descentralizada einstrumentos correlatos firmados com a CAPES;VI - coordenar a execuÃ§Ã£o, o acompanhamento orÃ§amentÃ¡rio e financeiro e a fiscalizaÃ§Ã£o do PROAP, por meio da PrÃ³-Reitoria de Pesquisa e PÃ³s-GraduaÃ§Ã£o (PRPPG), ou Ã³rgÃ£o equivalente de gestÃ£o da pÃ³s-graduaÃ§Ã£o stricto sensu, que seresponsabilizarÃ¡ pela interlocuÃ§Ã£o com a CAPES;VII - encaminhar Ã  CAPES os documentos necessÃ¡rios Ã  adesÃ£o e implementaÃ§Ã£o do PROAP, conforme modelosdisponibilizados na pÃ¡gina eletrÃ´nica da CAPES e legislaÃ§Ã£o vigente;VIII - divulgar internamente todos os comunicados enviados pela CAPES;IX - solicitar Ã  CAPES, caso necessÃ¡rio, remanejamento de recursos entre os PPGs, de forma a otimizar sua execuÃ§Ã£oplena;X - efetuar, de acordo com a legislaÃ§Ã£o vigente e quando couber, a prestaÃ§Ã£o de contas e apresentar os relatÃ³rios decumprimento de objeto, conforme modelos disponibilizados na pÃ¡gina eletrÃ´nica da CAPES.CapÃ­tulo IIIATRIBUIÃ‡Ã•ES DA CAPESArt. 3 Âº SÃ£o atribuiÃ§Ãµes da CAPES:I - estabelecer as normas e diretrizes do PROAP;II - definir, divulgar e transferir os recursos orÃ§amentÃ¡rios e financeiros destinados Ã s instituiÃ§Ãµes, com base nos valores dereferÃªncia correspondentes Ã  cada PPG e Ã  PRPPG ou Ã³rgÃ£o equivalente;III - acompanhar o desempenho dos PPGs nas instituiÃ§Ãµes apoiadas pelo PROAP, por intermÃ©dio das AvaliaÃ§Ãµes Trienaisconduzidas pela CAPES.CapÃ­tulo IVNORMAS OPERACIONAISArt. 4Âº O valor de referÃªncia para o repasse de recursos financeiros relativos aos PPGs serÃ¡ fixado anualmente em funÃ§Ã£oda disponibilidade orÃ§amentÃ¡ria da CAPES e dos critÃ©rios abaixo:I - critÃ©rios principais:a) Ã¡rea do conhecimento;b) nÃ­vel de formaÃ§Ã£o (mestrado ou doutorado); ec) nota dos cursos na avaliaÃ§Ã£o mais recente realizada pela CAPES.II - critÃ©rios subsidiÃ¡rios:a) grau de utilizaÃ§Ã£o das cotas de bolsas concedidas do Programa de Demanda Social (DS);b) grau de utilizaÃ§Ã£o das cotas de bolsas concedidas do Programa Nacional de PÃ³s-Doutorado (PNPD/CAPES); ec) grau de utilizaÃ§Ã£o dos recursos do PROAP em exercÃ­cios anteriores.Â§ 1Âº SerÃ¡ concedido um adicional de recursos Ã  PRPPG ou Ã³rgÃ£o equivalente, proporcional ao montante de recursoscorrespondentes aos PPGs de cada instituiÃ§Ã£o, que integrarÃ¡ o Plano de Trabalho do respectivo instrumento de repasse.Â§ 2Âº Os recursos financeiros do PROAP correspondentes ao PNPD/CAPES deverÃ£o ser utilizados exclusivamente para odesenvolvimento das atividades de pesquisa definidas pelos respectivos bolsistas em estÃ¡gio pÃ³s-doutoral, conforme previsto noPlano de Trabalho Institucional aprovado pela CAPES.Art. 5Âº No repasse de recursos serÃ£o utilizados um dos seguintes instrumentos, de acordo com respectiva legislaÃ§Ã£ovigente:I - Termo de ConvÃªnio;II - Termo de ExecuÃ§Ã£o Descentralizada; ouIII - Termo de SolicitaÃ§Ã£o e ConcessÃ£o de Apoio Financeiro a Projeto Educacional ou de Pesquisa - AUXPE, instrumentoespecÃ­fico regulamentado pela CAPES.Â§ 1Âº Quando utilizado o AUXPE, o mesmo serÃ¡ firmado entre a CAPES e o responsÃ¡vel legal pela PrÃ³-Reitoria de Pesquisae PÃ³sGraduaÃ§Ã£o ou Ã³rgÃ£o equivalente, com anuÃªncia do dirigente mÃ¡ximo da InstituiÃ§Ã£o beneficiada.Â§ 2Âº No caso de utilizaÃ§Ã£o do AUXPE, o responsÃ¡vel pelo recebimento do recurso submeter-se-Ã¡ Ã s normas correlatas desteinstrumento.Art. 6Âº DeverÃ¡ ser verificado junto Ã s unidades responsÃ¡veis pela execuÃ§Ã£o financeira e contÃ¡bil da instituiÃ§Ã£o oenquadramento dos elementos de despesa nas atividades financiÃ¡veis descritas no art. 7Âº, bem como os procedimentos e adocumentaÃ§Ã£o comprobatÃ³ria das despesas pagas na forma deste regulamento, observadas as disposiÃ§Ãµes da Lei de DiretrizesOrÃ§amentÃ¡rias (LDO), do Manual de Contabilidade Aplicada ao Setor PÃºblico (MCASP) e do Manual TÃ©cnico de OrÃ§amento (MTO)vigentes no respectivo exercÃ­cio, as normas vinculantes e as alteraÃ§Ãµes posteriores emitidas pela Secretaria do Tesouro Nacional(STN) e pela Secretaria de OrÃ§amento Federal (SOF).Art. 7Âº PoderÃ£o ser custeadas despesas correntes nos elementos e atividades abaixo, discriminados conforme objetivosdispostos no Artigo 1Âº:I - Elementos de despesa permitidos:a) material de consumo;b) serviÃ§os de terceiros (pessoa jurÃ­dica);c) serviÃ§os de terceiros (pessoa fÃ­sica);d) diÃ¡rias;e) passagens e despesas com locomoÃ§Ã£o;f) auxÃ­lio financeiro a estudante; eg) auxÃ­lio financeiro a pesquisador.II - Atividades a serem custeadas:a) manutenÃ§Ã£o de equipamentos;b) manutenÃ§Ã£o e funcionamento de laboratÃ³rio de ensino e pesquisa;c) serviÃ§os e taxas relacionados Ã  importaÃ§Ã£o;d) participaÃ§Ã£o em cursos e treinamentos em tÃ©cnicas de laboratÃ³rio e utilizaÃ§Ã£o de equipamentos;e) produÃ§Ã£o, revisÃ£o, traduÃ§Ã£o, editoraÃ§Ã£o, confecÃ§Ã£o e publicaÃ§Ã£o de conteÃºdos cientÃ­fico-acadÃªmicos e de divulgaÃ§Ã£o dasatividades desenvolvidas no Ã¢mbito dos PPGs;f) manutenÃ§Ã£o do acervo de periÃ³dicos, desde que nÃ£o contemplados no Portal de PeriÃ³dicos da CAPES;g) apoio Ã  realizaÃ§Ã£o de eventos cientÃ­fico-acadÃªmicos no paÃ­s;h) participaÃ§Ã£o de professores, pesquisadores e alunos em atividades e cientÃ­fico-acadÃªmicos no paÃ­s e no exterior;i) participaÃ§Ã£o de convidados externos em atividades cientÃ­fico-acadÃªmicas no paÃ­s;j) participaÃ§Ã£o de professores, pesquisadores e alunos em atividades de intercambio e parcerias entre PPGs e instituiÃ§Ãµesformalmente associados;k) participaÃ§Ã£o de alunos em cursos ou disciplinas em outro PPG, desde que estejam relacionados Ã s suas dissertaÃ§Ãµes eteses; el) aquisiÃ§Ã£o e manutenÃ§Ã£o de tecnologias em informÃ¡tica e da informaÃ§Ã£o caracterizadas como custeio, conforme dispostono artigo 6Âº.Â§ 1Âº As atividades descritas nas alÃ­neas 'h', 'j' e 'k' do inciso II deste artigo referem-se exclusivamente aos professoresvinculados aos PPGs, alunos matriculados nos PPGs e pesquisadores em estÃ¡gio pÃ³sdoutoral.Â§ 2Âº A anÃ¡lise de mÃ©rito e de priorizaÃ§Ã£o das despesas caberÃ¡ aos PPGs e respeitarÃ¡ os procedimentos administrativos decada instituiÃ§Ã£o, conforme Plano de Trabalho Institucional aprovado pela CAPES, bem como as atribuiÃ§Ãµes fixadas no inciso VI doart. 2Âº. No caso das despesas relativas aos bolsistas PNPD, a anÃ¡lise de mÃ©rito e de priorizaÃ§Ã£o caberÃ¡ aos bolsistas, conformedisposto no art. 4Âº, Â§ 2Âº.Â§ 3Âº PoderÃ£o ser utilizados outros elementos de despesa alÃ©m dos previstos no inciso I deste artigo, desde que guardemconsonÃ¢ncia com os objetivos dispostos no artigo 1Âº, sejam vinculados Ã s atividades-fim da pÃ³s-graduaÃ§Ã£o e estejam detalhadosno plano de trabalho ou na previsÃ£o orÃ§amentÃ¡ria com a devida aprovaÃ§Ã£o da CAPES.Art. 8Âº SerÃ¡ vedado pagamento de prÃ³-labore, consultoria, gratificaÃ§Ã£o e remuneraÃ§Ã£o para ministrar cursos, seminÃ¡rios,aulas, apresentar trabalhos e participar de bancas examinadoras;Art. 9Âº NÃ£o serÃ¡ permitida a contrataÃ§Ã£o de serviÃ§os de terceiros para cobrir despesas que caracterizem contratos de longaduraÃ§Ã£o, vÃ­nculo empregatÃ­cio, contrataÃ§Ãµes que nÃ£o sejam utilizadas nas atividadesfim da pÃ³s-graduaÃ§Ã£o ou contrataÃ§Ãµes emdesacordo com a legislaÃ§Ã£o vigente;Art. 10 SerÃ¡ vedado o recebimento concomitante de diÃ¡rias e auxÃ­lio financeiro para o custeio de despesas comhospedagem, alimentaÃ§Ã£o e locomoÃ§Ã£o urbana.Art. 11 O valor do auxÃ­lio financeiro para o custeio de despesas com hospedagem, alimentaÃ§Ã£o e locomoÃ§Ã£o urbana nÃ£opoderÃ¡ ser superior Ã  quantia equivalente em diÃ¡rias estabelecido para cargo de nÃ­vel superior, conforme parÃ¢metros fixados em legislaÃ§Ã£o federal vigente. Art. 12 SerÃ¡ vedado o custeio de despesas de capital."

teste = "INSTRUÃ‡ÃƒO NORMATIVA NÂº 02, DE 19 DE JULHO DE 2023 DispÃµe sobre as normas e os procedimentos para concessÃ£o de auxÃ­lio financeiro aos estudantes de pÃ³s-graduaÃ§Ã£o stricto sensu e para os pesquisadores em estÃ¡gio pÃ³s-doutoral (PNPD). A PRÃ“-REITORA DE PESQUISA E PÃ“S-GRADUAÃ‡ÃƒO DA UNIVERSIDADE FEDERAL DE ALAGOAS, no uso de suas atribuiÃ§Ãµes legais, RESOLVE: CAPÃTULO I - DAS DISPOSIÃ‡Ã•ES GERAIS Art. 1Âº Os discentes regularmente matriculados nos programas de pÃ³s-graduaÃ§Ã£o stricto sensu da Universidade Federal de Alagoas â€“ UFAL e os pesquisadores em estÃ¡gio pÃ³s-doutoral (PNPD) poderÃ£o receber o auxÃ­lio para participaÃ§Ã£o em eventos cientÃ­fico-acadÃªmicos no paÃ­s ou no exterior, ou para realizaÃ§Ã£o de atividades tÃ©cnico-cientÃ­ficas no paÃ­s, que sejam de interesse do programa de pÃ³s-graduaÃ§Ã£o e que estejam relacionados ao objeto de estudo do(a) discente ou pesquisador(a), nos limites impostos por esta InstruÃ§Ã£o Normativa. Â§ 1Âº Os discentes farÃ£o jus ao auxÃ­lio financeiro ao estudante. Â§ 2Âº Os pesquisadores em estÃ¡gio pÃ³s-doutoral (PNPD) farÃ£o jus ao auxÃ­lio financeiro ao pesquisador. Â§ 3Âº Consideram-se eventos cientÃ­fico-acadÃªmicos: congressos, encontros, simpÃ³sios, seminÃ¡rios, conferÃªncias e similares. Â§ 4Âº Consideram-se atividades tÃ©cnico-cientÃ­ficas: os trabalhos de campo, visitas tÃ©cnico-cientÃ­ficas, cursos e treinamentos. Art. 2Âº O auxÃ­lio financeiro ao estudante de pÃ³s-graduaÃ§Ã£o stricto sensu e ao pesquisador em estÃ¡gio pÃ³s-doutoral (PNPD), custeado por recursos do Programa de Apoio Ã  PÃ³s-GraduaÃ§Ã£o - PROAP, destina-se ao pagamento de despesas com hospedagem, alimentaÃ§Ã£o e locomoÃ§Ã£o urbana. Â§ 1Âº O auxÃ­lio financeiro nÃ£o poderÃ¡ ser utilizado para custear pagamento de taxa de inscriÃ§Ã£o em evento, curso ou qualquer outra atividade tÃ©cnico-cientÃ­fica. Â§ 2Âº O auxÃ­lio financeiro nÃ£o serÃ¡ concedido quando o deslocamento ocorrer dentro da mesma regiÃ£o metropolitana, aglomeraÃ§Ã£o urbana ou microrregiÃ£o em que o(a) discente esteja matriculado(a) e exerÃ§a suas atividades acadÃªmicas. Art. 3Âº A concessÃ£o do auxÃ­lio financeiro ao estudante e ao pesquisador atenderÃ¡ Ã s normas previstas nas Portarias CAPES nÂº 156/2014 e 132/2016, bem como Ã s demais legislaÃ§Ãµes aplicÃ¡veis. Art. 4Âº O valor do auxÃ­lio financeiro diÃ¡rio serÃ¡ de R$ 320,00 (Trezentos e vinte reais) para eventos ou atividades no Ã¢mbito nacional. Art. 5Âº O valor do auxÃ­lio financeiro diÃ¡rio para eventos internacionais serÃ¡ determinado conforme tabela disposta no Anexo 1 desta InstruÃ§Ã£o Normativa, devendo ser estipulado em dÃ³lares norte-americanos e convertido em reais, utilizando a taxa de conversÃ£o do Banco Central do Brasil (http://www4.bcb.gov.br/pec/conversao/conversao.asp). ParÃ¡grafo Ãšnico. A conversÃ£o do valor do auxÃ­lio-diÃ¡rio em reais deverÃ¡ ser efetuada pelo PPG na data em que a solicitaÃ§Ã£o for deferida pela CoordenaÃ§Ã£o. Art. 6Âº A quantidade de auxÃ­lio-diÃ¡rio a ser concedida deverÃ¡ ser compatÃ­vel com os dias de participaÃ§Ã£o no evento/atividade. Â§ 1Âº Para cada dia de evento/atividade, serÃ¡ concedido o valor correspondente a um auxÃ­lio-diÃ¡rio, nÃ£o sendo permitida a concessÃ£o de valores fracionados. Â§ 2Âº Caso o valor do auxÃ­lio-diÃ¡rio nÃ£o seja concedido na totalidade dos dias do evento/atividade, o PPG deverÃ¡ emitir ofÃ­cio justificando o motivo. Para anexar o ofÃ­cio na requisiÃ§Ã£o, serÃ¡ necessÃ¡rio realizar a junÃ§Ã£o do documento ao primeiro arquivo que serÃ¡ inserido. Art. 7Âº O valor a ser concedido aos discentes ou aos pesquisadores em estÃ¡gio pÃ³s-doutoral (PNPD) nÃ£o poderÃ¡ ultrapassar o limite de 10 (dez) auxÃ­lios-diÃ¡rios por evento/atividade. ParÃ¡grafo Ãšnico. Caso a quantidade de auxÃ­lios-diÃ¡rios ultrapasse o limite estabelecido no caput, a solicitaÃ§Ã£o deverÃ¡ ser apreciada pelo Colegiado do PPG, cuja aprovaÃ§Ã£o deverÃ¡ ser comprovada por meio da ata da reuniÃ£o. Para anexar a ata na requisiÃ§Ã£o, serÃ¡ necessÃ¡rio realizar a junÃ§Ã£o do documento ao primeiro arquivo que serÃ¡ inserido. CAPÃTULO II - DAS CONDIÃ‡Ã•ES PARA SOLICITAÃ‡ÃƒO DO AUXÃLIO FINANCEIRO AO ESTUDANTE DE PÃ“S-GRADUAÃ‡ÃƒO Art. 8Âº O(a) discente que participar de eventos cientÃ­fico-acadÃªmicos nacionais ou internacionais somente poderÃ¡ receber o auxÃ­lio financeiro caso comprove a condiÃ§Ã£o de apresentador(a) de trabalho cientÃ­fico, palestrante ou debatedor(a), sendo vedada a concessÃ£o do auxÃ­lio financeiro para ouvinte. ParÃ¡grafo Ãšnico. Em caso de coautoria de trabalho entre discentes, serÃ¡ autorizado auxÃ­lio financeiro apenas para o(a) apresentador(a). Art. 9Âº O(a) discente que participar de atividades tÃ©cnico-cientÃ­ficas no paÃ­s somente poderÃ¡ receber o auxÃ­lio financeiro mediante a apresentaÃ§Ã£o de documento contendo o perÃ­odo, o local e a descriÃ§Ã£o detalhada da atividade a ser realizada e a relevÃ¢ncia para a sua formaÃ§Ã£o. Art. 10 A definiÃ§Ã£o do teto orÃ§amentÃ¡rio anual para o custeio das solicitaÃ§Ãµes de auxÃ­lio financeiro ao estudante serÃ¡ de responsabilidade dos PPGs. Art. 11 CaberÃ¡ ao PPG a anÃ¡lise do mÃ©rito para a concessÃ£o do auxÃ­lio financeiro ao estudante, tendo como parÃ¢metro a natureza e relevÃ¢ncia das atividades a serem desenvolvidas pelo(a) discente como instrumento para sua formaÃ§Ã£o acadÃªmica e capacitaÃ§Ã£o profissional. CAPÃTULO III - DAS CONDIÃ‡Ã•ES PARA SOLICITAÃ‡ÃƒO DO AUXÃLIO FINANCEIRO AO PESQUISADOR EM ESTÃGIO PÃ“S-DOUTORAL (PNPD) Art. 12 CaberÃ¡ ao bolsista PNPD a anÃ¡lise do mÃ©rito para o recebimento do auxÃ­lio financeiro ao pesquisador, tendo como parÃ¢metro a natureza e relevÃ¢ncia das atividades relacionadas ao seu objeto de estudo. Art. 13 O(a) pesquisador(a) em estÃ¡gio pÃ³s-doutoral que participar de atividades tÃ©cnico-cientÃ­ficas no paÃ­s somente poderÃ¡ receber o auxÃ­lio financeiro mediante a apresentaÃ§Ã£o de documento contendo o perÃ­odo, o local e a descriÃ§Ã£o detalhada da atividade a ser realizada e a relevÃ¢ncia para o seu objeto de pesquisa. CAPÃTULO IV - DOS PROCEDIMENTOS PARA SOLICITAÃ‡ÃƒO DO AUXÃLIO FINANCEIRO Art. 14 Os interessados deverÃ£o solicitar o auxÃ­lio financeiro Ã  CoordenaÃ§Ã£o do PPG a que estiverem vinculados com, no mÃ¡ximo, 15 dias de antecedÃªncia. Art. 15 ApÃ³s a aprovaÃ§Ã£o da solicitaÃ§Ã£o, a CoordenaÃ§Ã£o do PPG deverÃ¡ abrir requisiÃ§Ã£o no SIPAC seguindo as orientaÃ§Ãµes composta no manual disponÃ­vel em https://ufal.br/estudante/pos-graduacao/programa-de-apoio-a-pos-graduacao-proap-capes/auxilio-financeiro-ao-estudante-pesquisador/solicitacoes-de-auxilios-2023, encaminhando a requisiÃ§Ã£o para unidade de destino da PRÃ“-REITORIA DE PESQUISA E PÃ“S-GRADUAÃ‡ÃƒO (11.00.43.03), para aprovaÃ§Ã£o do PrÃ³-reitor (a), inserindo a documentaÃ§Ã£o exigida para cada um dos tipos de motivos permitidos para a concessÃ£o do AuxÃ­lio Financeiro ao Estudante. Â§ 1. ParticipaÃ§Ã£o em evento cientÃ­fico-acadÃªmico: (carta de aceite, programaÃ§Ã£o do evento e resumo do trabalho acadÃªmico); Â§ 2. ParticipaÃ§Ã£o em curso/treinamento: (comprovante de inscriÃ§Ã£o, programaÃ§Ã£o do curso/treinamento); Â§ 3. RealizaÃ§Ã£o de trabalho de campo/visita tÃ©cnica: (carta convite, plano de atividades assinado pelo orientador (a); ParÃ¡grafo Ãšnico. Nas situaÃ§Ãµes descritas no Â§ 3, nÃ£o existindo carta convite, o PPG deverÃ¡ emitir ofÃ­cio justificando o motivo da falta do documento. Para anexar o ofÃ­cio na requisiÃ§Ã£o, serÃ¡ necessÃ¡rio realizar a junÃ§Ã£o do documento ao primeiro arquivo que serÃ¡ inserido. Art. 16 NÃ£o serÃ£o atendidas as requisiÃ§Ãµes de auxÃ­lio financeiro cadastradas antes da data de abertura do empenho, que serÃ¡ informada aos PPGs pela PrÃ³-reitoria de Pesquisa e PÃ³s-graduaÃ§Ã£o. Art. 17 As requisiÃ§Ãµes sÃ³ poderÃ£o ser atendidas se todos os documentos anexados estiverem assinados pelo proponente ou o coordenador do programada. As assinaturas constantes nos documentos que compÃµem a requisiÃ§Ã£o deverÃ£o estar de acordo com a InstruÃ§Ã£o Normativa GR nÂº 01, de 11 de fevereiro de 2021. ParÃ¡grafo Ãšnico. SerÃ¡ admitida apenas assinatura eletrÃ´nica avanÃ§ada ou qualificada para os coordenadores, orientadores dos PPGs e autorizadores da PROPEP e DCF. Art. 18 NÃ£o serÃ£o aceitos documentos com rasuras de qualquer natureza ou que nÃ£o estejam instruÃ­dos de acordo com esta InstruÃ§Ã£o Normativa. CAPÃTULO V - DOS PROCEDIMENTOS PARA PRESTAÃ‡ÃƒO DE CONTAS DO AUXÃLIO FINANCEIRO Art. 19 Em atÃ© 15 (quinze) dias apÃ³s o recebimento do auxÃ­lio, o(a) beneficiÃ¡rio(a) deverÃ¡ efetuar a prestaÃ§Ã£o de contas junto ao seu Programa de PÃ³s-graduaÃ§Ã£o, apresentando os seguintes documentos: I - Comprovante de sua efetiva participaÃ§Ã£o no evento/atividade (certificado/declaraÃ§Ã£o). II - Caso o interessado tenha recebido o auxÃ­lio para realizaÃ§Ã£o de trabalho de campo, deverÃ¡ entregar relatÃ³rio de atividades realizadas, conforme modelo disponÃ­vel em: https://ufal.br/estudante/pos-graduacao/programa-de-apoio-a-pos-graduacao-proap-capes/auxilio-financeiro-ao-estudante-pesquisador. Â§ 1Âº As assinaturas constantes nos documentos que compÃµem a prestaÃ§Ã£o de contas poderÃ£o ser obtidas por meio da plataforma oficial https://www.gov.br/governodigital/pt-br/assinatura-eletronica Art. 20 ApÃ³s a entrega dos documentos de prestaÃ§Ã£o de contas, a CoordenaÃ§Ã£o do PPG deverÃ¡ apreciar, indicando o deferimento ou indeferimento da PrestaÃ§Ã£o de Contas e realizar a PrestaÃ§Ã£o de Contas no SIPAC seguindo as orientaÃ§Ãµes composta no manual disponÃ­vel em https://ufal.br/estudante/pos-graduacao/programa-de-apoio-a-pos-graduacao-proap-capes/auxilio-financeiro-ao-estudante-pesquisador/solicitacoes-de-auxilios-2023 Art. 21 O(a) beneficiÃ¡rio(a) que nÃ£o encaminhar a prestaÃ§Ã£o de contas dentro do prazo estabelecido nesta InstruÃ§Ã£o Normativa ficarÃ¡ impedido de receber novo auxÃ­lio financeiro enquanto nÃ£o sanada a pendÃªncia e estarÃ¡ sujeito(a) Ã  devoluÃ§Ã£o dos recursos recebidos. Art. 22 O(a) coordenador(a) do PPG e o(a) professor(a) responsÃ¡vel (orientador/a) responderÃ£o solidariamente pela prestaÃ§Ã£o de contas do(a) estudante/pesquisador(a), podendo ser aplicadas as sanÃ§Ãµes previstas na legislaÃ§Ã£o vigente em caso de irregularidade. Art. 23 A CPG farÃ¡ a anÃ¡lise da prestaÃ§Ã£o de contas, indicando a sua aprovaÃ§Ã£o ou reprovaÃ§Ã£o. Â§ 1Âº Caso a prestaÃ§Ã£o de contas nÃ£o seja encaminhada em atÃ© 30 dias apÃ³s o recebimento do auxÃ­lio, o PPG deverÃ¡ solicitar ao DCF a emissÃ£o de Guia de Recolhimento da UniÃ£o (GRU) para devoluÃ§Ã£o dos valores concedidos. Â§ 2Âº ApÃ³s o pagamento da GRU, o PPG deverÃ¡ encaminhar o respectivo comprovante ao DCF para arquivamento. CAPÃTULO VI - DAS DISPOSIÃ‡Ã•ES FINAIS Art. 25 Esta InstruÃ§Ã£o Normativa entra em vigor na data de sua publicaÃ§Ã£o. Art. 26 Os casos omissos desta InstruÃ§Ã£o Normativa serÃ£o analisados pela PrÃ³-Reitoria de Pesquisa e PÃ³s-GraduaÃ§Ã£o â€“ PROPEP. IRAILDES PEREIRA ASSUNÃ‡ÃƒO ANEXO I - TABELA DE AUXÃLIO DIÃRIO NO EXTERIOR GRUPO PA Ã S E S Valor do AuxÃ­lio DiÃ¡rio (USD) A AfeganistÃ£o, ArmÃªnia, Bangladesh, Belarus, Benin, BolÃ­via, Burkina-Fasso, ButÃ£o, Chile, Comores, RepÃºblica Popular DemocrÃ¡tica da CorÃ©ia, Costa Rica, El Salvador, Equador, EslovÃªnia, Filipinas, GÃ¢mbia, Guiana, GuinÃ© Bissau, GuinÃ©, Honduras, IndonÃ©sia, IrÃ£, Iraque, Laos, LÃ­bano, MalÃ¡sia, Maldivas, Marrocos, MongÃ³lia, Myanmar, NamÃ­bia, Nauru, Nepal, NicarÃ¡gua, PanamÃ¡, Paraguai, Rep. Centro Africana, RepÃºblica Togolesa, SalomÃ£o, Samoa, Serra Leoa, SÃ­ria, SomÃ¡lia, Sri Lanka, Suriname, TadjiquistÃ£o, TailÃ¢ndia, Timor Leste, Tonga, TunÃ­sia, TurcomenistÃ£o, Turquia, Tuvalu, VietnÃ£, ZimbÃ¡bue 180 B Ãfrica do Sul, AlbÃ¢nia, Andorra, ArgÃ©lia, Argentina, AustrÃ¡lia, Belize, BÃ³snia-HerzegÃ³vina, Burundi, Cabo Verde, CamarÃµes, Camboja, Catar, Chade, China, Chipre, ColÃ´mbia, Dominica, Egito, EritrÃ©ia, EstÃ´nia, EtiÃ³pia, Gana, GeÃ³rgia, GuinÃ©- Equatorial, Haiti, Hungria, IÃªmen, Ilhas Marshall, Ãndia, Kiribati, Lesoto, LÃ­bia, MacedÃ´nia, Madagascar, MalauÃ­, MicronÃ©sia, MoÃ§ambique, MoldÃ¡via, NÃ­ger, NigÃ©ria, Nova ZelÃ¢ndia, Palau, Papua Nova GuinÃ©, PaquistÃ£o, Peru, PolÃ´nia, QuÃªnia, RepÃºblica Dominicana, RepÃºblica Eslovaca, RomÃªnia, Ruanda, SÃ£o TomÃ© e PrÃ­ncipe, Senegal, SudÃ£o, TanzÃ¢nia, Uruguai, UzbequistÃ£o, Venezuela. C AntÃ­gua e Barbuda, ArÃ¡bia Saudita, AzerbaijÃ£o, Bahamas, Barein, Botsuana, Brunei Darussalam, BulgÃ¡ria, CanadÃ¡, Cingapura, Congo, Costa do Marfim, Cuba, Djibuti, Emirados Ãrabes, Fiji, GabÃ£o, Guatemala, Jamaica, JordÃ¢nia, LetÃ´nia, LibÃ©ria, LituÃ¢nia, Mali, Malta, MaurÃ­cio, MauritÃ¢nia, MÃ©xico, RepÃºblica DemocrÃ¡tica do Congo, RepÃºblica Tcheca, RÃºssia, San Marino, Santa LÃºcia, SÃ£o CristovÃ£o e NÃ©vis, SÃ£o Vicente e Granadinas, Taiwan, Trinidad e Tobago, UcrÃ¢nia, Uganda, ZÃ¢mbia. 310 D Alemanha, Angola, Ãustria, Barbados, BÃ©lgica, CazaquistÃ£o, CorÃ©ia do Sul, CroÃ¡cia, Dinamarca, Espanha, Estados Unidos da AmÃ©rica, FinlÃ¢ndia, FranÃ§a, Granada, GrÃ©cia, Hong Kong, Irlanda, IslÃ¢ndia, Israel, ItÃ¡lia, JapÃ£o, Kuaite, Liechtenstein, Luxemburgo, MÃ´naco, Montenegro, Noruega, OmÃ£, PaÃ­ses Baixos, Portugal, Reino Unido, RepÃºblica Quirguiz, Seicheles, SÃ©rvia, SuazilÃ¢ndia, SuÃ©cia, SuÃ­Ã§a, Vanuatu. 370"


st.set_page_config(page_icon="ğŸ’¬", layout="wide",
                   page_title="Mestrado Frederico - PROAP DÃºvidas")


st.subheader("Tire suas DÃºvidas sobre Portaria PROAP \nAutor: Daniel Gomes de Mello Farias", divider="rainbow", anchor=False)

# Sidebar com botÃ£o para limpar a janela de chat.
with st.sidebar:
    if st.button("Limpar Chat", use_container_width=True, type="primary"):
        st.session_state.messages = []
        st.rerun()


client = Groq(
    api_key=st.secrets["GROQ_API_KEY"],
)

# Initialize chat history and selected model
if "messages" not in st.session_state:
    st.session_state.messages = []

if "selected_model" not in st.session_state:
    st.session_state.selected_model = None




model_option = "llama3-70b-8192"

# Detect model change and clear chat history if model has changed
if st.session_state.selected_model != model_option:
    st.session_state.messages = []
    st.session_state.selected_model = model_option


max_tokens = 8192

# Display chat messages from history on app rerun
for message in st.session_state.messages:
    avatar = 'ğŸ¤–' if message["role"] == "assistant" else 'ğŸ‘¨â€ğŸ’»'
    with st.chat_message(message["role"], avatar=avatar):
        st.markdown(message["content"])


def generate_chat_responses(chat_completion) -> Generator[str, None, None]:
    """Yield chat response content from the Groq API response."""
    for chunk in chat_completion:
        if chunk.choices[0].delta.content:
            yield chunk.choices[0].delta.content


if prompt := st.chat_input("Digite sua pergunta - Estamos aqui pra tirar suas dÃºvidas..."):
    st.session_state.messages.append({"role": "user", "content": prompt})    

    with st.chat_message("user", avatar='ğŸ‘¨â€ğŸ’»'):
        st.markdown(prompt)

    # Adicione o texto de referÃªncia como contexto no prompt
    messages = [
        {"role": "system", "content": f"VocÃª Ã© um assistente virtual especializado em responder perguntas com base no seguinte texto: {reference_text} + {teste}. Seu objetivo Ã© fornecer explicaÃ§Ãµes claras e concisas, citando a localizaÃ§Ã£o exata (documento, parÃ¡grafo, etc.) onde a informaÃ§Ã£o foi encontrada no texto. Responda apenas com base no texto fornecido."},
        *[
            {"role": m["role"], "content": m["content"]}
            for m in st.session_state.messages
        ]
    ]

    # Fetch response from Groq API
    try:
        chat_completion = client.chat.completions.create(
            model=model_option,
            messages=messages,
            max_tokens=max_tokens,
            stream=True
        )

        # Use the generator function with st.write_stream
        with st.chat_message("assistant", avatar="ğŸ¤–"):
            chat_responses_generator = generate_chat_responses(chat_completion)
            full_response = st.write_stream(chat_responses_generator)
    except Exception as e:
        st.error(e, icon="ğŸš¨")

    # Append the full response to session_state.messages
    if isinstance(full_response, str):
        st.session_state.messages.append(
            {"role": "assistant", "content": full_response})
    else:
        # Handle the case where full_response is not a string
        combined_response = "\n".join(str(item) for item in full_response)
        st.session_state.messages.append(
            {"role": "assistant", "content": combined_response})